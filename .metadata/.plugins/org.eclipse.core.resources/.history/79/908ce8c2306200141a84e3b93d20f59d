package Algorithm;

public class IsRotation{
	
	/*Assume you have a method isSubstring which checks if one word is a
	 *substring of another. Given two strings, s1 and s2, write code to check if s2 is
	 *a rotation of s1 using only one call to isSubstring (e.g.,"waterbottle"is a rotation
	 *of "erbottlewat").
	 */

	public static boolean isRotation(String stringOne, String stringTwo){
		if(stringOne == null || stringTwo == null){
			return false;
		}
		int stringOneLength = stringOne.length();
		int stringTwoLength = stringTwo.length();
		if(stringOneLength != stringTwoLength){
			return false;
		}
		int stringTwoIndex = 0;
		int foundCharIndex = 0;
		boolean foundChar = false;
		for(int i = 0; i < stringOneLength; i++ ){
			if(stringOne.charAt(i) == stringTwo.charAt(stringTwoIndex)){
				if(!foundChar){
					foundCharIndex = i;
				}
				foundChar = true;
				stringTwoIndex++;
			} else if (foundChar) {
				foundChar = false;
				stringTwoIndex = 0;
				i = foundCharIndex + 1;
			}
		}
		if(foundChar){
			return isSubstring(stringOne, stringTwo.substring(stringTwoIndex, stringTwoLength));
		}
		return false;
	}

	private static boolean isSubstring(String stringOne, String subString){
		if(stringOne == null || subString == null){
			return false;
		}
		if(stringOne.length() < subString.length()){
			return false;
		};
		int startIndex = 0;
		int firstCharacter = 0;
		boolean isSubstring  = false;
		boolean newStartIndex = false;
		for(int i = 0; i < stringOne.length();i++){
			if(startIndex == subString.length()){
				return true;
			}
			if( (stringOne.length() - i)  < (subString.length() - startIndex) ){
				return false;
			}
			if(stringOne.charAt(i) == subString.charAt(startIndex)){
				if(startIndex == 0){
					isSubstring = true;
					firstCharacter = i + 1;
				} else if (isSubstring && !newStartIndex){
					firstCharacter = i;
					newStartIndex = true;
				}
				startIndex++;
			} else if (isSubstring ){
				isSubstring = false;
				i = firstCharacter;
				newStartIndex = false;
				startIndex = 0;
			}
		}
		if(startIndex == subString.length()){
			return true;
		}
		return false;
	}
}
